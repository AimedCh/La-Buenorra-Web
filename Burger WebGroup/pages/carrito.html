<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Buenorra - Tu Cesta</title>
    <link href="https://fonts.cdnfonts.com/css/hobo-bt" rel="stylesheet">
    <link rel="icon" href="./imagenes/logo-web.jpg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/cesta_css.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <a href="../index.html" class="back-button">‚Üê Inicio</a>
    
    <div class="cart-container">
        <div class="cart-header">
            <h1>üõí TU CESTA</h1>
            <p style="font-size: 1.2rem; color: #147f4c; font-family: Arial, sans-serif;">Revisa tu pedido antes de finalizar</p>
        </div>

        <div class="separador"></div>

        <!-- Productos en la cesta -->
        <div class="cart-section" id="cart-items">
            <h2>üì¶ PRODUCTOS SELECCIONADOS</h2>
            
            <!-- Productos se cargar√°n aqu√≠ din√°micamente -->
            <div id="items-container">
                <!-- Ejemplo de productos (se reemplazar√°n din√°micamente) -->
                <div class="cart-item" data-id="1">
                    <img src="./imagenes/labuenorra.png" alt="La Buenorra" onerror="this.src='https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=150&h=150&fit=crop'">
                    <div class="item-details">
                        <h4>LA BUENORRA</h4>
                        <p>100% carne de res, tocino, aros de cebolla, queso americano y salsa BBQ</p>
                        <div class="quantity-controls">
                            <button class="qty-btn" onclick="changeQuantity(1, -1)">-</button>
                            <span class="quantity" id="qty-1">1</span>
                            <button class="qty-btn" onclick="changeQuantity(1, 1)">+</button>
                        </div>
                    </div>
                    <div class="item-price" id="price-1">‚Ç¨12.50</div>
                    <button class="remove-btn" onclick="removeItem(1)">üóëÔ∏è</button>
                </div>
                
                <div class="cart-item" data-id="2">
                    <img src="https://images.unsplash.com/photo-1573080496219-bb080dd4f877?w=150&h=150&fit=crop" alt="Papas Fritas">
                    <div class="item-details">
                        <h4>PAPAS FRITAS CL√ÅSICAS</h4>
                        <p>Papas cortadas frescas, fritas a la perfecci√≥n</p>
                        <div class="quantity-controls">
                            <button class="qty-btn" onclick="changeQuantity(2, -1)">-</button>
                            <span class="quantity" id="qty-2">2</span>
                            <button class="qty-btn" onclick="changeQuantity(2, 1)">+</button>
                        </div>
                    </div>
                    <div class="item-price" id="price-2">‚Ç¨9.00</div>
                    <button class="remove-btn" onclick="removeItem(2)">üóëÔ∏è</button>
                </div>
            </div>
            
            <!-- Mensaje de cesta vac√≠a (oculto por defecto) -->
            <div class="empty-cart" id="empty-cart" style="display: none;">
                <h3>üçî Tu cesta est√° vac√≠a</h3>
                <p>¬°A√±ade algunas de nuestras deliciosas hamburguesas!</p>
                <a href="./menu.html" class="btn-primary-custom">Ver Men√∫</a>
            </div>
        </div>

        <div class="separador"></div>

        <!-- Resumen del pedido -->
        <div class="summary-section" id="order-summary">
            <h2 style="color: rgb(239, 235, 209); font-size: 2rem; text-align: center; margin-bottom: 20px; font-family: 'Hobo BT', sans-serif;">üí∞ RESUMEN DEL PEDIDO</h2>
            
            <div class="summary-row">
                <span>Subtotal:</span>
                <span id="subtotal">‚Ç¨21.50</span>
            </div>
            
            <div class="summary-row">
                <span>Delivery:</span>
                <span id="delivery">‚Ç¨2.50</span>
            </div>
            
            <div class="summary-row">
                <span>IVA (21%):</span>
                <span id="tax">‚Ç¨5.04</span>
            </div>
            
            <div class="summary-row summary-total">
                <span>TOTAL:</span>
                <span id="total">‚Ç¨29.04</span>
            </div>
            
            <div class="action-buttons">
                <button class="btn-primary-custom" onclick="proceedToCheckout()">üöÄ REALIZAR PEDIDO</button>
                <a href="menu_page.html" class="btn-secondary-custom">‚ûï A√ëADIR M√ÅS</a>
            </div>
        </div>

        <div class="add-items-section">
            <a href="../pages/menu.html" class="btn-secondary-custom">‚Üê Volver al Men√∫</a>
        </div>
    </div>

    <script>
        // Datos de productos (simulados)
        let cartData = {
            1: { name: "LA BUENORRA", price: 12.50, quantity: 1, image: "./imagenes/labuenorra.png" },
            2: { name: "PAPAS FRITAS CL√ÅSICAS", price: 4.50, quantity: 2, image: "https://images.unsplash.com/photo-1573080496219-bb080dd4f877?w=150&h=150&fit=crop" }
        };

        // Funci√≥n para cambiar cantidad
        function changeQuantity(itemId, change) {
            if (cartData[itemId]) {
                cartData[itemId].quantity += change;
                if (cartData[itemId].quantity <= 0) {
                    removeItem(itemId);
                    return;
                }
                updateDisplay();
            }
        }

        // Funci√≥n para eliminar producto
        function removeItem(itemId) {
            if (confirm('¬øEst√°s seguro de que quieres eliminar este producto?')) {
                delete cartData[itemId];
                updateDisplay();
            }
        }

        // Funci√≥n para actualizar la visualizaci√≥n
        function updateDisplay() {
            const qtyElement = document.getElementById(`qty-${Object.keys(cartData)[0]}`);
            const priceElement = document.getElementById(`price-${Object.keys(cartData)[0]}`);
            
            if (Object.keys(cartData).length === 0) {
                document.getElementById('cart-items').style.display = 'none';
                document.getElementById('order-summary').style.display = 'none';
                document.getElementById('empty-cart').style.display = 'block';
                return;
            }

            // Actualizar cantidades y precios
            Object.keys(cartData).forEach(id => {
                const qtyEl = document.getElementById(`qty-${id}`);
                const priceEl = document.getElementById(`price-${id}`);
                if (qtyEl) qtyEl.textContent = cartData[id].quantity;
                if (priceEl) priceEl.textContent = `‚Ç¨${(cartData[id].price * cartData[id].quantity).toFixed(2)}`;
            });

            updateSummary();
        }

        // Funci√≥n para actualizar el resumen
        function updateSummary() {
            let subtotal = 0;
            Object.keys(cartData).forEach(id => {
                subtotal += cartData[id].price * cartData[id].quantity;
            });

            const delivery = 2.50;
            const tax = subtotal * 0.21;
            const total = subtotal + delivery + tax;

            document.getElementById('subtotal').textContent = `‚Ç¨${subtotal.toFixed(2)}`;
            document.getElementById('delivery').textContent = `‚Ç¨${delivery.toFixed(2)}`;
            document.getElementById('tax').textContent = `‚Ç¨${tax.toFixed(2)}`;
            document.getElementById('total').textContent = `‚Ç¨${total.toFixed(2)}`;
        }

        // Funci√≥n para proceder al checkout
        function proceedToCheckout() {
            if (Object.keys(cartData).length === 0) {
                alert('Tu cesta est√° vac√≠a. ¬°A√±ade algunos productos primero!');
                return;
            }
            
            // Simular proceso de pedido
            if (confirm('¬øConfirmas tu pedido? Te redirigiremos al proceso de pago.')) {
                alert('¬°Genial! Tu pedido est√° siendo procesado. Te contactaremos pronto para confirmar los detalles.');
                // Aqu√≠ ir√≠a la l√≥gica real de checkout
                // window.location.href = 'checkout.html';
            }
        }

        // Inicializar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            updateSummary();
        });
    </script>
</body>
</html>